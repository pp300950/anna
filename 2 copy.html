<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ตัวจำแนกประเภทแบบ Naive Bayes</title>
<style>
    .container {
        max-width: 600px;
        margin: 0 auto;
        text-align: center;
        padding: 20px;
    }
    textarea {
        width: 100%;
        margin-bottom: 10px;
    }
    button {
        padding: 10px 20px;
        background-color: #007bff;
        color: #fff;
        border: none;
        cursor: pointer;
    }
    button:hover {
        background-color: #0056b3;
    }
    #result {
        margin-top: 20px;
    }
    button {
            padding: 10px 20px;
            background-color: #007bff;
            color: #fff;
            border: none;
            cursor: pointer;
        }

        button:hover {
            background-color: #0056b3;
        }

        .confirmation-buttons {
            margin-top: 20px;
        }

        .confirmation-buttons button {
            margin: 0 10px;
        }
</style>
</head>
<body>
<div class="container">
    <h1>ตัวจำแนกประเภทแบบ Naive Bayes</h1>
    <textarea id="newData" placeholder="ป้อนข้อมูลใหม่ (เช่น เพศ, อายุ)"></textarea>
    <button onclick="predictCategory()">ทำนายประเภท</button>
    <div id="question"></div>
        <div class="confirmation-buttons">
            <button onclick="answerQuestion(true)">ใช่</button>
            <button onclick="answerQuestion(false)">ไม่ใช่</button>
        </div>
    <div id="result"></div>
</div>

<script>
    class NaiveBayes {
        constructor() {
            this.classes = {};
            this.totalSamples = 0;
        }

        learn(features, label) {
            if (!this.classes[label]) {
                this.classes[label] = { total: 0, features: {} };
            }

            features.forEach(feature => {
                if (!this.classes[label].features[feature]) {
                    this.classes[label].features[feature] = 1;
                } else {
                    this.classes[label].features[feature]++;
                }
                this.classes[label].total++;
                this.totalSamples++;
            });
        }

        categorize(features) {
            let maxProbability = -1;
            let predictedClass = null;

            for (let label in this.classes) {
                let classProbability = this.classes[label].total / this.totalSamples;
                let featureProbability = 1;

                features.forEach(feature => {
                    const featureCount = this.classes[label].features[feature] || 0;
                    const totalFeatures = this.classes[label].total || 0;
                    featureProbability *= (featureCount + 1) / (totalFeatures + 1);
                });

                const probability = classProbability * featureProbability;

                if (probability > maxProbability) {
                    maxProbability = probability;
                    predictedClass = label;
                }
            }

            return predictedClass;
        }
    }

    const classifier = new NaiveBayes();

    // ข้อมูลตัวอย่าง
    const data = [
        {
            name: 'อั๋น',
            เพศ: 'ชาย',
            อายุ: 16,
            ความสัมพัน: 'เพื่อนสมัยเรียนประถมด้วยกัน',
            ความชอบ: 'ชอบวาดรูปรถ',
            ความชอบ: 'ชอบรถทัวร์',
            ถนัด: 'เขียนตามคำบอก'
        },
        {
            name: 'ปูน',
            เพศ: 'ชาย',
            อายุ: 16,
            ความสัมพัน: 'เพื่อนสมัยเรียนประถมด้วยกัน',
            ความชอบ: 'นอน',
            ถนัด: 'ภาษาอังกฤษ'
        },
        {
            name: 'น้ำแข็ง',
            เพศ: 'หญิง',
            อายุ: 14,
            ความสัมพัน: 'รุ่นน้อง',
        }
    ];

    // เรียนรู้จากข้อมูลตัวอย่าง
    data.forEach(person => {
        const features = [];
        features.push(person.เพศ);
        features.push(person.อายุ);
        features.push(person.ความชอบ);
        features.push(person.ความสัมพัน);
        features.push(person.ถนัด);
        classifier.learn(features, person.name);
    });

    function predictCategory() {
    const newDataInput = document.getElementById('newData').value;
    const newDataArray = newDataInput.split(',').map(item => item.trim());
    const predictedCategory = classifier.categorize(newDataArray);
    const resultElement = document.getElementById('result');
    
    // ตรวจสอบว่าการทำนายถูกต้องหรือไม่
    let correctPredictions = 0;
    data.forEach(person => {
        const features = [];
        features.push(person.เพศ);
        features.push(person.อายุ);
        features.push(person.ความชอบ);
        features.push(person.ความสัมพัน);
        features.push(person.ถนัด);
        const actualCategory = person.name;
        const predictedCategory = classifier.categorize(features);
        if (actualCategory === predictedCategory) {
            correctPredictions++;
        }
    });
    
    // คำนวณเปอร์เซ็นต์การทำนายที่ถูกต้อง
    const accuracyPercentage = (correctPredictions / data.length) * 100;
    
    resultElement.innerHTML = `ประเภทที่ทำนายได้: ${predictedCategory}<br>`;
    resultElement.innerHTML += `ความแม่นยำ: ${accuracyPercentage.toFixed(2)}%`;
}

</script>

</body>
</html>