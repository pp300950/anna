<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ระบบหาค่าความใกล้เคียง</title>
    <style>
        .container {
            max-width: 600px;
            margin: 0 auto;
            text-align: center;
            padding: 20px;
        }

        textarea {
            width: 100%;
            margin-bottom: 10px;
        }

        button {
            padding: 10px 20px;
            background-color: #007bff;
            color: #fff;
            border: none;
            cursor: pointer;
        }

        button:hover {
            background-color: #0056b3;
        }

        .confirmation-buttons {
            margin-top: 20px;
        }

        .confirmation-buttons button {
            margin: 0 10px;
        }

        #result {
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ระบบหาค่าความใกล้เคียง</h1>
        <div id="question"></div>
        <div class="confirmation-buttons">
            <button onclick="answerQuestion(true)">ใช่</button>
            <button onclick="answerQuestion(false)">ไม่ใช่</button>
        </div>
        <div id="result">
            <p>บุคคลที่คุณตามหาอาจเป็น <span id="mostSimilarPerson"></span> (<span id="matchPercentage"></span>%)</p>
        </div>
    </div>
    <script>
                const data = [
            {
                name: 'อั๋น',
                เพศ: 'ชาย',
                อายุ: 16,
                เคยมีเเฟน: 'ไม่เคย',
                ความสัมพัน: 'เพื่อนสมัยเรียนประถมด้วยกัน',
                ผลการเรียน: 'ตอนเรียนป.3-6 ผลการเรียน ไม่ใช่อันดับที่ 1-3 ของห้องเสมอ',
                เดือนเกิด: 'เมษายน',
                โรงเรียน: '',
                ความชอบ: 'ชอบวาดรูปรถ',
                ถนัด: 'เขียนตามคำบอก',
            },
            {
                name: 'ปูน',
                เพศ: 'ชาย',
                อายุ: 16,
                เคยมีเเฟน: 'ไม่เคย',
                ความสัมพัน: 'เพื่อนสมัยเรียนประถมด้วยกัน',
                ผลการเรียน: 'ตอนเรียนป.3-6 ผลการเรียน ไม่ใช่อันดับที่ 1-3 ของห้องเสมอ',
                เดือนเกิด: 'พฤษจิกายน',
                โรงเรียน: 'เรียนม.ต้นที่พานทองสภา',
                ความชอบ: 'นอน',
                ถนัด: 'ภาษาอังกฤษ',
            },
            {
                name: 'ยูชิ',
                เพศ: 'หญิง',
                อายุ: 16,
                ความสัมพัน: 'เพื่อนสมัยเรียนประถมด้วยกัน',
                ผลการเรียน: 'ตอนเรียนป.3-6 ผลการเรียนได้อันดับที่ 1-3 ของห้องเสมอ',
                เดือนเกิด: 'สิงหาคม',
                โรงเรียน: 'เรียนม.ต้นที่พานทองสภา',
                ความชอบ: 'ชอบหนุ่มวาย-เกาหลี',
            },
            {
                name: 'เปิ้ล',
                เพศ: 'หญิง',
                อายุ: 16,
                ความสัมพัน: 'เพื่อนสมัยเรียนประถมด้วยกัน',
                ผลการเรียน: 'ตอนเรียนป.3-6 ผลการเรียนได้อันดับที่ 1-3 ของห้องเสมอ',
                เดือนเกิด: 'มกราคม',
                ชือ: 'มีชื่อเล่นที่เกี่ยวกับหรือเป็น ผลไม้'
            },
            {
                name: 'ใบเตย',
                เพศ: 'หญิง',
                อายุ: 16,
                เคยมีเเฟน: 'ไม่เคย',
                ความสัมพัน: 'เพื่อนสมัยเรียนประถมด้วยกัน',
                โรงเรียน: 'เรียนม.ต้นที่พนัสพิทยาคาร',
                ผลการเรียน: 'ตอนเรียนป.3-6 ผลการเรียนได้อันดับที่ 1-3 ของห้องเสมอ',
                เดือนเกิด: 'มิถุนายน',
            },
            {
                name: 'จ๋า',
                เพศ: 'หญิง',
                อายุ: 16,
                ความสัมพัน: 'เพื่อนสมัยเรียนประถมด้วยกัน',
                ผลการเรียน: 'ตอนเรียนป.3-6 ผลการเรียน ไม่ใช่อันดับที่ 1-3 ของห้องเสมอ',
                โรงเรียน: 'เรียนม.ต้นที่วัดศรีประชาราม',
                สนิท: 'เป็นเพื่อนที่สนิทกับปูนนิดหน่อย',
                บุคลิก: 'เป็นสาวเท่'
            },
            {
                name: 'ผักบุ้ง',
                เพศ: 'หญิง',
                อายุ: 16,
                ความสัมพัน: 'เพื่อนสมัยเรียนประถมด้วยกัน',
                เดือนเกิด: 'กรกฎาคม',
                ผลการเรียน: 'ตอนเรียนป.3-6 ผลการเรียน ไม่ใช่อันดับที่ 1-3 ของห้องเสมอ',
                ชือ: 'ชื่อเล่นของคุณเกี่ยวกับน้ำ เช่นผักในน้ำ หรือมีคำว่าน้ำในชื่อ',
                สนิท: 'เป็นเพื่อนที่สนิทกับมิ้นต์'
            },
            {
                name: 'มิ้นต์',
                เพศ: 'หญิง',
                อายุ: 16,
                เคยมีเเฟน: 'เคย',
                ความสัมพัน: 'เพื่อนของเพื่อน',
                เดือนเกิด: 'พฤษภาคม',
                โรงเรียน: 'เรียนม.ปลายที่พานทอง',
                ชือ: 'คุณมีอีกชื่อคือวิว',
                สนิท: 'เป็นเพื่อนที่สนิทกับมิ้นต์'
            },
            {
                name: 'ว่านน้ำ',
                เพศ: 'หญิง',
                อายุ: 16,
                ความสัมพัน: 'เพื่อนสมัยเรียนประถมด้วยกัน',
                ผลการเรียน: 'ตอนเรียนป.3-6 ผลการเรียน ไม่ใช่อันดับที่ 1-3 ของห้องเสมอ',
                ชือ: 'ชื่อเล่นของคุณเกี่ยวกับน้ำ เช่นผักในน้ำ หรือมีคำว่าน้ำในชื่อ',
                สนิท: 'เป็นเพื่อนที่สนิทกับพวกไอซ์1เเละนนท์'
            },
            {
                name: 'เจ๊ลิลลี่',
                เพศ: 'ชาย',
                อายุ: 16,
                เคยมีเเฟน: 'ไม่เคย',
                ความสัมพัน: 'เพื่อนสมัยเรียนประถมด้วยกัน',
                เดือนเกิด: 'สิงหาคม',
                ผลการเรียน: 'ตอนเรียนป.3-6 ผลการเรียน ไม่ใช่อันดับที่ 1-3 ของห้องเสมอ',
                รสนิยม: 'คุณคือตัวเเม่'
            },
            {
                name: 'ต้นข้าว',
                เพศ: 'หญิง',
                อายุ: 16,
                เคยมีเเฟน: 'เคย',
                ความสัมพัน: 'เพื่อนสมัยเรียนประถมด้วยกัน',
                เดือนเกิด: 'สิงหาคม',
                ผลการเรียน: 'ตอนเรียนป.3-6 ผลการเรียน ไม่ใช่อันดับที่ 1-3 ของห้องเสมอ',
                สถานะ: 'คุณเป็นลูกเจ้าของบริษัทผลิตอาหารเสริม'
            },
            {
                name: 'พิ',
                เพศ: 'หญิง',
                อายุ: 16,
                เคยมีเเฟน: 'เคย',
                ความสัมพัน: 'เพื่อนสมัยเรียนประถมด้วยกัน',
                ผลการเรียน: 'ตอนเรียนป.3-6 ผลการเรียน ไม่ใช่อันดับที่ 1-3 ของห้องเสมอ',
                เดือนเกิด: 'มิถุนายน',
            },

            {
                name: 'ปอนด์',
                เพศ: 'ชาย',
                อายุ: 16,
                ความสัมพัน: 'เพื่อนตอนเรียนม.ปลายด้วยกัน',
                เดือนเกิด: 'สิงหาคม',
                โรงเรียน: 'เรียนม.ปลายที่พานทอง',
                สนิท: 'เป็นเพื่อนที่สนิทกันในกลุ่มปอนด์ ดรีมเเละพิงค์ น้ำฝน',
            },
            {
                name: 'พิงค์',
                เพศ: 'หญิง',
                อายุ: 16,
                เคยมีเเฟน: 'เคย',
                ความสัมพัน: 'เพื่อนตอนเรียนม.ปลายด้วยกัน',
                เดือนเกิด: 'มกราคม',
                โรงเรียน: 'เรียนม.ปลายที่พานทอง',
                สนิท: 'เป็นเพื่อนที่สนิทกันในกลุ่มปอนด์ ดรีมเเละพิงค์ น้ำฝน',
                ความชอบ: 'ชอบวาดรูป',
            },
            {
                name: 'น้ำฝน',
                เพศ: 'หญิง',
                อายุ: 16,
                เคยมีเเฟน: 'เคย',
                ความสัมพัน: 'เพื่อนตอนเรียนม.ปลายด้วยกัน',
                เดือนเกิด: 'มิถุนายน',
                โรงเรียน: 'เรียนม.ปลายที่พานทอง',
                ความชอบ: 'ชอบวาดรูป',
                สนิท: 'เป็นเพื่อนที่สนิทกันในกลุ่มปอนด์ ดรีมเเละพิงค์ น้ำฝน',

            },
            {
                name: 'นันฟาง',
                เพศ: 'ชาย',
                อายุ: 16,
                ความสัมพัน: 'เพื่อนตอนเรียนม.ปลายด้วยกัน',
                เดือนเกิด: 'กันยายน',
                โรงเรียน: 'เรียนม.ปลายที่พานทอง',
                ความชอบ: 'ชอบขับรถเที่ยวไปทั่ว',
                ถนัด: 'งานทุกอย่างที่ครูใช้เเละถ้าไปทำจะไม่ต้องเรียน'
            },
            {
                name: 'เอ็ม',
                เพศ: 'ชาย',
                อายุ: 16,
                ความสัมพัน: 'เพื่อนตอนเรียนม.ปลายด้วยกัน',
                เดือนเกิด: 'มีนาคม',
                โรงเรียน: 'เรียนม.ปลายที่พานทอง',
                ความชอบ: 'ชอบเล่นเกมฟุตบอล',
            },
            {
                name: 'ครีม',
                เพศ: 'หญิง',
                อายุ: 16,
                เคยมีเเฟน: 'เคย',
                ความสัมพัน: 'เพื่อนตอนเรียนม.ปลายด้วยกัน',
                เดือนเกิด: 'สิงหาคม',
                โรงเรียน: 'เรียนม.ปลายที่พานทอง',
                ความชอบ: 'ชอบเสื้อผ้าเเละการเเต่งหน้า',
            },
            {
                name: 'อาร์ม',
                เพศ: 'ชาย',
                อายุ: 16,
                ความสัมพัน: 'เพื่อนตอนเรียนม.ปลายด้วยกัน',
                เดือนเกิด: 'มิถุนายน',
                โรงเรียน: 'เรียนม.ปลายที่พานทอง',
                ชือ: 'ชื่อเล่นของคุณภาษาไทยเเปลว่าเเขน',
            },
            {
                name: 'องศา',
                เพศ: 'ชาย',
                อายุ: 16,
                เคยมีเเฟน: 'ไม่เคย',
                ความสัมพัน: 'เพื่อนตอนเรียนม.ปลายด้วยกัน',
                เดือนเกิด: 'เมษายน',
                โรงเรียน: 'เรียนม.ปลายที่พานทอง',
                ชือ: 'คุณมีอีกชื่อคือวิว',
            },
            {
                name: 'ดรีม',
                เพศ: 'ชาย',
                อายุ: 16,
                ความสัมพัน: 'เพื่อนตอนเรียนม.ปลายด้วยกัน',
                เดือนเกิด: 'เมษายน',
                โรงเรียน: 'เรียนม.ปลายที่พานทอง',
                ความชอบ: 'ชอบเล่นfiveM, roblox',
                ชือ: 'ชื่อเล่นของคุณภาษาไทยเเปลว่าความฝัน',
            },
            {
                name: 'เนะ',
                เพศ: 'หญิง',
                อายุ: 14,
                ความสัมพัน: 'รุ่นน้อง',
                สนิท: 'รู้จัก อั๋นเเละปูน',
                ถูกชอบ: 'ปูนชอบคุณ เเม้ไม่ใช่ อย่างน้อยปังปอนด์ก็เชียร์'
            },
            {
                name: 'คุณหนู',
                เพศ: 'หญิง',
                อายุ: 14,
                เคยมีเเฟน: 'ไม่เคย',
                ความสัมพัน: 'รุ่นน้อง',
                เดือนเกิด: 'ธันวาคม',
                พบกัน: 'คุณกับปังปอนด์พบกันเพราะเกม miniworld',
                ถูกชอบ: 'ปูนชอบคุณ เเม้ไม่ใช่ อย่างน้อยปังปอนด์ก็เชียร์'
            },
            {
                name: 'ผักหวาน',
                เพศ: 'หญิง',
                อายุ: 15,
                ความสัมพัน: 'รุ่นน้อง',
                เดือนเกิด: 'ธันวาคม',
                พบกัน: 'คุณกับปังปอนด์พบกันเพราะเกม miniworld',
                ครอบครัว: 'มีคุณพ่อเป็นชาวต่างชาติ',
                ถนัด: 'ภาษาอังกฤษ',
            },
            {
                name: 'จันทร์จ้าว',
                เพศ: 'หญิง',
                อายุ: 15,
                ความสัมพัน: 'รุ่นน้อง',
                เดือนเกิด: 'กุมภาพันธ์',
                พบกัน: 'คุณกับปังปอนด์พบกันเพราะเกม miniworld',
                ชือปลอม: 'คุณมีชื่อว่ากระต่าย  เเต่จริงๆเเล้วคุณชื่อเล่นว่า จันทร์จ้าว'
            },
            {
                name: 'น้ำแข็ง',
                เพศ: 'หญิง',
                อายุ: 14,
                เคยมีเเฟน: 'เคย',
                ความสัมพัน: 'รุ่นน้อง',
                ชือ: 'ชื่อเล่นของคุณเกี่ยวกับน้ำ เช่นผักในน้ำ หรือมีคำว่าน้ำในชื่อ',
                เดือนเกิด: 'กรกฎาคม',
                พบกัน: 'คุณกับปังปอนด์พบกันเพราะเกม freefire'
            },
            {
                name: 'ฝันหวาน',
                เพศ: 'หญิง',
                อายุ: 14,
                ความสัมพัน: 'รุ่นน้อง',
                พบกัน: 'คุณกับปังปอนด์พบกันเพราะเกม freefire',
                ถนัด: 'วาดรูปสวย',
                ความชอบ: 'ชอบวาดรูป',
            },
            {
                name: 'เกรป',
                เพศ: 'หญิง',
                อายุ: 13,
                ความสัมพัน: 'รุ่นน้อง',
                ชือ: 'มีชื่อเล่นที่เกี่ยวกับหรือเป็น ผลไม้',
                เดือนเกิด: 'กรกฎาคม',
                พบกัน: 'คุณกับปังปอนด์พบกันเพราะเกม freefire'
            },
            {
                name: 'พิมพ์',
                เพศ: 'หญิง',
                อายุ: 14,
                เคยมีเเฟน: 'เคย',
                ความสัมพัน: 'รุ่นน้อง',
                เดือนเกิด: 'มกราคม',
                พบกัน: 'คุณกับปังปอนด์พบกันเพราะเกม freefire',
                เเคลน: 'คุณเป็นลูกเเคลนของเเคลน ID:[???]'
            },
            {
                name: 'ตัง',
                เพศ: 'ชาย',
                อายุ: 14,
                เคยมีเเฟน: 'เคย',
                ความสัมพัน: 'รุ่นน้อง',
                เดือนเกิด: 'กันยายน',
                พบกัน: 'คุณกับปังปอนด์พบกันเพราะเกม freefire',
                เเคลน: 'คุณเป็นลูกเเคลนของเเคลน ID:[???]'
            },
            {
                name: 'ตาล',
                เพศ: 'ชาย',
                อายุ: 16,
                เคยมีเเฟน: 'เคย',
                ความสัมพัน: 'เพื่อนตอนเรียนม.ต้นด้วยกัน',
                เดือนเกิด: 'มีนาคม',
                ถนัด: 'ภาษาอังกฤษ',
                เรียน: 'วิศกรรมไฟฟ้า'
            },
            {
                name: 'ธี',
                เพศ: 'ชาย',
                อายุ: 16,
                เคยมีเเฟน: 'เคย',
                ความสัมพัน: 'เพื่อนตอนเรียนม.ต้นด้วยกัน',
                เดือนเกิด: 'มีนาคม',
                เเคลน: 'คุณเป็นลูกเเคลนของเเคลน ID:[???]',
                เรียน: 'กศน.'
            },
            {
                name: 'เฟริน',
                เพศ: 'หญิง',
                อายุ: 12,
                เคยมีเเฟน: 'ไม่เคย',
                ผลการเรียน: 'ตอนเรียนป.3-6 ผลการเรียน ไม่ใช่อันดับที่ 1-3 ของห้องเสมอ',
                ความสัมพัน: 'เพื่อนสมัยเรียนประถมด้วยกัน',
                ความชอบ: 'เล่นเกม',
                เกมทีชอบ: 'ROV',
                ครอบครัว: 'เป็นคนภายในครอบครัวปังปอนด์',
            },
            {
                name: 'พี่เเดง',
                เพศ: 'หญิง',
                อายุ: 34,
                เคยมีเเฟน: 'เคย',
                ความสัมพัน: 'พี่สาวของปังปอนด์',
                เดือนเกิด: 'พฤศจิกายน',
                ครอบครัว: 'เป็นคนภายในครอบครัวปังปอนด์',
            },
            {
                name: 'พี่เพชร',
                เพศ: 'ชาย',
                อายุ: 34,
                เคยมีเเฟน: 'เคย',
                ความสัมพัน: 'พี่เขยของปังปอนด์',
                เดือนเกิด: 'ตุลาคม',
                ครอบครัว: 'เป็นคนภายในครอบครัวปังปอนด์',
            },
            {
                name: 'พี่กอล์ฟ',
                เพศ: 'ชาย',
                อายุ: 27,
                เคยมีเเฟน: 'เคย',
                ความสัมพัน: 'พี่ชายของปังปอนด์',
                เดือนเกิด: 'กุมภาพันธ์',
                ครอบครัว: 'เป็นคนภายในครอบครัวปังปอนด์',
                ความชอบ: 'ชอบเล่นเบส',
                เกมทีชอบ: 'ROV',
            },
            {
                name: 'พี่โปรเเกรมเมอร์',
                เพศ: 'ชาย',
                อายุ: 27,
                เคยมีเเฟน: 'เคย',
                เดือนเกิด: 'มิถุนายน',
                อาชีพ: 'โปรเเกรมเมอร์'
            },
            {
                name: 'ครูโต',
                เพศ: 'ชาย',
                อายุ: 37,
                เคยมีเเฟน: 'เคย',
                ความสัมพัน: 'ครูสมัยเรียนประถม',
                อาชีพ: 'ครูวิทยาศาสตร์'
            },
        ];

        // Function to calculate similarity percentage between two objects
        function calculateSimilarityPercentage(obj1, obj2) {
            const keys = Object.keys(obj1);
            let matchingAttributes = 0;
            let totalAttributes = 0; // Variable to store the total number of attributes with non-zero weight
            for (let key of keys) {
                if (obj1[key] === obj2[key]) {
                    matchingAttributes++;
                    if (obj1[key] !== undefined && obj1[key] !== null) {
                        totalAttributes++; // Increment the totalAttributes count if the key has non-zero weight
                    }
                }
            }
            return (totalAttributes > 0) ? (matchingAttributes / totalAttributes) * 100 : 0; // Return 0 if totalAttributes is 0
        }

        // Function to find most similar person
        function findMostSimilarPerson(inputData) {
            let maxPercentage = 0;
            let mostSimilarPerson = null;
            for (let person of data) {
                // If gender matches, increase score
                let score = (inputData['เพศ'] === person['เพศ']) ? 1 : -1;

                const percentage = calculateSimilarityPercentage(inputData, person) + score;
                if (percentage > maxPercentage) {
                    maxPercentage = percentage;
                    mostSimilarPerson = person;
                }
            }
            return { person: mostSimilarPerson, percentage: maxPercentage };
        }

        // Function to generate and display a question
        function generateQuestion() {
            const questionDiv = document.getElementById('question');
            questionDiv.innerHTML = '';

            // Randomly choose whether to ask a question about male or female gender
            const isAskingMaleQuestion = Math.random() < 0.5; // 50% chance to ask male question

            const genderQuestion = isAskingMaleQuestion ? 'คุณเป็นผู้ชายไหม?' : 'คุณเป็นผู้หญิงไหม?';
            const answerWeight = isAskingMaleQuestion ? 1 : -1; // Assigning weights for answer

            questionDiv.textContent = genderQuestion;

            return answerWeight;
        }

        // Function to handle answering question
        function answerQuestion(answer) {
            // Sample input data (You can replace this with your own data)
            const inputData = {
                name: 'ชื่อของคุณ',
                เพศ: answer === true ? 'หญิง' : 'ชาย',
                อายุ: 'อายุของคุณ',
                'เพื่อนสมัยเรียนประถมด้วยกัน': true/false,
                'เป็นเพื่อนสนิทกับปังปอน': true/false,
                'ชอบวาดรูปรถ': true/false,
                'ชอบรถทัวร์': true/false,
                'เขียนตามคำบอกเก่ง': true/false,
                'คนเงียบ': true/false,
                'กำลังเรียนรู้ภาษาอังกฤษ': true/false,
                'กำลังเรียนรู้ภาษาญี่ปุ่น': true/false,
                'รู้จักกันในเกม': true/false
            };

            const { person, percentage } = findMostSimilarPerson(inputData);

            // Check if the elements exist before accessing their properties
            const mostSimilarPersonElement = document.getElementById('mostSimilarPerson');
            const matchPercentageElement = document.getElementById('matchPercentage');

            // Update the textContent only if the elements exist
            if (mostSimilarPersonElement && matchPercentageElement) {
                mostSimilarPersonElement.textContent = person ? person.name : '';
                matchPercentageElement.textContent = percentage.toFixed(2);
            }

            // If the user is male and under 15, decrease the score of all users under 15
            if (inputData['เพศ'] === 'ชาย' && answer === true && parseInt(inputData['อายุ']) < 15) {
                for (let person of data) {
                    if (person['อายุ'] < 15) {
                        person.score -= 1;
                    }
                }
            }

            // Generate and display a new question
            const answerWeight = generateQuestion();
        }

        // Generate the first question when the page loads
        window.onload = function() {
            generateQuestion();
        };
    </script>
</body>
</html>
