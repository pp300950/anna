<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ตัวจำแนกประเภทแบบ Naive Bayes</title>
<style>
    .container {
        max-width: 600px;
        margin: 0 auto;
        text-align: center;
        padding: 20px;
    }
    textarea {
        width: 100%;
        margin-bottom: 10px;
    }
    button {
        padding: 10px 20px;
        background-color: #007bff;
        color: #fff;
        border: none;
        cursor: pointer;
    }
    button:hover {
        background-color: #0056b3;
    }
    .tabContent {
        display: none;
    }
    .activeTab {
        display: block;
    }
</style>
</head>
<body>
<div class="container">
    <h1>ตัวจำแนกประเภทแบบ Naive Bayes</h1>
    <div>
        <button onclick="openTab('genderTab')">เพศ</button>
        <button onclick="openTab('ageTab')">อายุ</button>
        <button onclick="openTab('interestsTab')">ความชอบ</button>
    </div>
    <div id="genderTab" class="tabContent">
        <label for="gender">เพศ:</label>
        <select id="gender">
            <option value="ชาย">ชาย</option>
            <option value="หญิง">หญิง</option>
        </select>
    </div>
    <div id="ageTab" class="tabContent">
        <label for="age">อายุ:</label>
        <input type="text" id="age" placeholder="ป้อนอายุ">
    </div>
    <div id="interestsTab" class="tabContent">
        <label>ความชอบ:</label><br>
        <div>
            <input type="checkbox" id="drawing" value="ชอบวาดรูปรถ">
            <label for="drawing">ชอบวาดรูปรถ</label><br>
        </div>
        <div>
            <input type="checkbox" id="touring" value="ชอบรถทัวร์">
            <label for="touring">ชอบรถทัวร์</label><br>
        </div>
        <div>
            <input type="checkbox" id="writing" value="เขียนตามคำบอก">
            <label for="writing">เขียนตามคำบอก</label><br>
        </div>
    </div>
    <button onclick="predictCategory()">ทำนายประเภท</button>
    <div id="result"></div>
</div>

<script>
    class NaiveBayes {
        constructor() {
            this.classes = {};
            this.totalSamples = 0;
        }

        learn(features, label) {
            if (!this.classes[label]) {
                this.classes[label] = { total: 0, features: {} };
            }

            features.forEach(feature => {
                if (!this.classes[label].features[feature]) {
                    this.classes[label].features[feature] = 1;
                } else {
                    this.classes[label].features[feature]++;
                }
                this.classes[label].total++;
                this.totalSamples++;
            });
        }

        categorize(features) {
            let maxProbability = -1;
            let predictedClass = null;

            for (let label in this.classes) {
                let classProbability = this.classes[label].total / this.totalSamples;
                let featureProbability = 1;

                features.forEach(feature => {
                    const featureCount = this.classes[label].features[feature] || 0;
                    const totalFeatures = this.classes[label].total || 0;
                    featureProbability *= (featureCount + 1) / (totalFeatures + 1);
                });

                const probability = classProbability * featureProbability;

                if (probability > maxProbability) {
                    maxProbability = probability;
                    predictedClass = label;
                }
            }

            return predictedClass;
        }
    }

    const classifier = new NaiveBayes();

    // ข้อมูลตัวอย่าง
    const data = [
        {
            name: 'อั๋น',
            เพศ: 'ชาย',
            อายุ: 16,
            ความชอบ: ['ชอบวาดรูปรถ', 'ชอบรถทัวร์', 'เขียนตามคำบอก']
        },
        {
            name: 'ปูน',
            เพศ: 'ชาย',
            อายุ: 16,
            ความชอบ: ['นอน', 'ภาษาอังกฤษ']
        },
        {
            name: 'น้ำแข็ง',
            เพศ: 'หญิง',
            อายุ: 14,
            ความชอบ: ['รุ่นน้อง']
        }
    ];

    // เรียนรู้จากข้อมูลตัวอย่าง
    data.forEach(person => {
        classifier.learn(person.ความชอบ, person.name);
    });

    function predictCategory() {
        const gender = document.getElementById('gender').value;
        const age = document.getElementById('age').value;
        const drawing = document.getElementById('drawing').checked ? 'ชอบวาดรูปรถ' : '';
        const touring = document.getElementById('touring').checked ? 'ชอบรถทัวร์' : '';
        const writing = document.getElementById('writing').checked ? 'เขียนตามคำบอก' : '';
        const interests = [drawing, touring, writing];
        const newData = [gender, age, ...interests.filter(interest => interest !== '')];
        const predictedCategory = classifier.categorize(newData);
        const resultElement = document.getElementById('result');
        resultElement.innerText = `ประเภทที่ทำนายได้: ${predictedCategory}`;
    }

    function openTab(tabName) {
        const tabs = document.getElementsByClassName('tabContent');
        for (let i = 0; i < tabs.length; i++) {
            tabs[i].classList.remove('activeTab');
        }
        document.getElementById(tabName).classList.add('activeTab');
    }
</script>

</body>
</html>
