<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ระบบหาค่าความใกล้เคียง</title>
    <style>
        .container {
            max-width: 600px;
            margin: 0 auto;
            text-align: center;
            padding: 20px;
        }

        textarea {
            width: 100%;
            margin-bottom: 10px;
        }

        button {
            padding: 10px 20px;
            background-color: #007bff;
            color: #fff;
            border: none;
            cursor: pointer;
        }

        button:hover {
            background-color: #0056b3;
        }

        .confirmation-buttons {
            margin-top: 20px;
        }

        .confirmation-buttons button {
            margin: 0 10px;
        }

        #result {
            margin-top: 20px;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>ระบบหาค่าความใกล้เคียง</h1>
        <div id="question"></div>
        <div class="confirmation-buttons">
            <button onclick="truee()">ใช่</button>
            <button onclick="fale()">ไม่ใช่</button>
        </div>
        <div id="result">
            <p>บุคคลที่คุณตามหาอาจเป็น <span id="mostSimilarPerson"></span> (<span id="matchPercentage"></span>%)</p>
        </div>
    </div>
    <script>
        const data = [
            {
                name: 'อั๋น',
                เพศ: 'ชาย',
                อายุ: 16,
                เคยมีเเฟน: 'ไม่เคย',
                ความสัมพัน: 'เพื่อนสมัยเรียนประถมด้วยกัน',
                ผลการเรียน: 'ตอนเรียนป.3-6 ผลการเรียน ไม่ใช่อันดับที่ 1-3 ของห้องเสมอ',
                เดือนเกิด: 'เมษายน',
                โรงเรียน: '',
                ความชอบ: 'ชอบวาดรูปรถ',
                ถนัด: 'เขียนตามคำบอก',
            },
            {
                name: 'ปูน',
                เพศ: 'ชาย',
                อายุ: 16,
                เคยมีเเฟน: 'ไม่เคย',
                ความสัมพัน: 'เพื่อนสมัยเรียนประถมด้วยกัน',
                ผลการเรียน: 'ตอนเรียนป.3-6 ผลการเรียน ไม่ใช่อันดับที่ 1-3 ของห้องเสมอ',
                เดือนเกิด: 'พฤษจิกายน',
                โรงเรียน: 'เรียนม.ต้นที่พานทองสภา',
                ความชอบ: 'นอน',
                ถนัด: 'ภาษาอังกฤษ',
            },
            {
                name: 'ยูชิ',
                เพศ: 'หญิง',
                อายุ: 16,
                ความสัมพัน: 'เพื่อนสมัยเรียนประถมด้วยกัน',
                ผลการเรียน: 'ตอนเรียนป.3-6 ผลการเรียนได้อันดับที่ 1-3 ของห้องเสมอ',
                เดือนเกิด: 'สิงหาคม',
                โรงเรียน: 'เรียนม.ต้นที่พานทองสภา',
                ความชอบ: 'ชอบหนุ่มวาย-เกาหลี',
            },
            {
                name: 'เปิ้ล',
                เพศ: 'หญิง',
                อายุ: 16,
                ความสัมพัน: 'เพื่อนสมัยเรียนประถมด้วยกัน',
                ผลการเรียน: 'ตอนเรียนป.3-6 ผลการเรียนได้อันดับที่ 1-3 ของห้องเสมอ',
                เดือนเกิด: 'มกราคม',
                ชือ: 'มีชื่อเล่นที่เกี่ยวกับหรือเป็น ผลไม้'
            },
            {
                name: 'ใบเตย',
                เพศ: 'หญิง',
                อายุ: 16,
                ความสัมพัน: 'เพื่อนสมัยเรียนประถมด้วยกัน',
                โรงเรียน: 'เรียนม.ต้นที่พนัสพิทยาคาร',
                ผลการเรียน: 'ตอนเรียนป.3-6 ผลการเรียนได้อันดับที่ 1-3 ของห้องเสมอ',
                เดือนเกิด: 'มิถุนายน',
            },
            {
                name: 'จ๋า',
                เพศ: 'หญิง',
                อายุ: 16,
                ความสัมพัน: 'เพื่อนสมัยเรียนประถมด้วยกัน',
                ผลการเรียน: 'ตอนเรียนป.3-6 ผลการเรียน ไม่ใช่อันดับที่ 1-3 ของห้องเสมอ',
                โรงเรียน: 'เรียนม.ต้นที่วัดศรีประชาราม',
                สนิท: 'เป็นเพื่อนที่สนิทกับปูนนิดหน่อย',
                บุคลิก: 'เป็นสาวเท่'
            },
            {
                name: 'ผักบุ้ง',
                เพศ: 'หญิง',
                อายุ: 16,
                ความสัมพัน: 'เพื่อนสมัยเรียนประถมด้วยกัน',
                เดือนเกิด: 'กรกฎาคม',
                ผลการเรียน: 'ตอนเรียนป.3-6 ผลการเรียน ไม่ใช่อันดับที่ 1-3 ของห้องเสมอ',
                ชือ: 'ชื่อเล่นของคุณเกี่ยวกับน้ำ เช่นผักในน้ำ หรือมีคำว่าน้ำในชื่อ',
                สนิท: 'เป็นเพื่อนที่สนิทกับมิ้นต์'
            },
            {
                name: 'มิ้นต์',
                เพศ: 'หญิง',
                อายุ: 16,
                ความสัมพัน: 'เพื่อนของเพื่อน',
                เดือนเกิด: 'พฤษภาคม',
                โรงเรียน: 'เรียนม.ปลายที่พานทอง',
                ชือ: 'คุณมีอีกชื่อคือวิว',
                สนิท: 'เป็นเพื่อนที่สนิทกับมิ้นต์'
            },
            {
                name: 'ว่านน้ำ',
                เพศ: 'หญิง',
                อายุ: 16,
                ความสัมพัน: 'เพื่อนสมัยเรียนประถมด้วยกัน',
                ผลการเรียน: 'ตอนเรียนป.3-6 ผลการเรียน ไม่ใช่อันดับที่ 1-3 ของห้องเสมอ',
                ชือ: 'ชื่อเล่นของคุณเกี่ยวกับน้ำ เช่นผักในน้ำ หรือมีคำว่าน้ำในชื่อ',
                สนิท: 'เป็นเพื่อนที่สนิทกับพวกไอซ์1เเละนนท์'
            },
            {
                name: 'เจ๊ลิลลี่',
                เพศ: 'ชาย',
                อายุ: 16,
                ความสัมพัน: 'เพื่อนสมัยเรียนประถมด้วยกัน',
                เดือนเกิด: 'สิงหาคม',
                ผลการเรียน: 'ตอนเรียนป.3-6 ผลการเรียน ไม่ใช่อันดับที่ 1-3 ของห้องเสมอ',
                รสนิยม: 'คุณคือตัวเเม่'
            },
            {
                name: 'ต้นข้าว',
                เพศ: 'หญิง',
                อายุ: 16,
                ความสัมพัน: 'เพื่อนสมัยเรียนประถมด้วยกัน',
                เดือนเกิด: 'สิงหาคม',
                ผลการเรียน: 'ตอนเรียนป.3-6 ผลการเรียน ไม่ใช่อันดับที่ 1-3 ของห้องเสมอ',
                สถานะ: 'คุณเป็นลูกเจ้าของบริษัทผลิตอาหารเสริม' 
            },
            {
                name: 'พิ',
                เพศ: 'หญิง',
                อายุ: 16,
                ความสัมพัน: 'เพื่อนสมัยเรียนประถมด้วยกัน',
                ผลการเรียน: 'ตอนเรียนป.3-6 ผลการเรียน ไม่ใช่อันดับที่ 1-3 ของห้องเสมอ',
                เดือนเกิด: 'มิถุนายน',
            },
            {
                name: 'ครูโต',
                เพศ: 'ชาย',
                อายุ: 37,
                ความสัมพัน: 'ครูสมัยเรียนประถม',
                สอน: 'ครูวิชาวิทยาศาสตร์'
            },
            {
                name: 'ปอนด์',
                เพศ: 'ชาย',
                อายุ: 16,
                ความสัมพัน: 'เพื่อนตอนเรียนม.ปลายด้วยกัน',
                เดือนเกิด: 'สิงหาคม',
                โรงเรียน: 'เรียนม.ปลายที่พานทอง',
                สนิท: 'เป็นเพื่อนที่สนิทกันในกลุ่มปอนด์ ดรีมเเละพิงค์ น้ำฝน',
            },
            {
                name: 'พิงค์',
                เพศ: 'หญิง',
                อายุ: 16,
                ความสัมพัน: 'เพื่อนตอนเรียนม.ปลายด้วยกัน',
                เดือนเกิด: 'มกราคม',
                โรงเรียน: 'เรียนม.ปลายที่พานทอง',
                สนิท: 'เป็นเพื่อนที่สนิทกันในกลุ่มปอนด์ ดรีมเเละพิงค์ น้ำฝน',
                ความชอบ: 'ชอบวาดรูป',
            },
            {
                name: 'น้ำฝน',
                เพศ: 'หญิง',
                อายุ: 16,
                ความสัมพัน: 'เพื่อนตอนเรียนม.ปลายด้วยกัน',
                เดือนเกิด: 'มิถุนายน',
                โรงเรียน: 'เรียนม.ปลายที่พานทอง',
                ความชอบ: 'ชอบวาดรูป',
                สนิท: 'เป็นเพื่อนที่สนิทกันในกลุ่มปอนด์ ดรีมเเละพิงค์ น้ำฝน',

            },
            {
                name: 'นันฟาง',
                เพศ: 'ชาย',
                อายุ: 16,
                ความสัมพัน: 'เพื่อนตอนเรียนม.ปลายด้วยกัน',
                เดือนเกิด: 'กันยายน',
                โรงเรียน: 'เรียนม.ปลายที่พานทอง',
                ความชอบ: 'ชอบขับรถเที่ยวไปทั่ว',
                ถนัด: 'งานทุกอย่างที่ครูใช้เเละถ้าไปทำจะไม่ต้องเรียน'
            },
            {
                name: 'เอ็ม',
                เพศ: 'ชาย',
                อายุ: 16,
                ความสัมพัน: 'เพื่อนตอนเรียนม.ปลายด้วยกัน',
                เดือนเกิด: 'มีนาคม',
                โรงเรียน: 'เรียนม.ปลายที่พานทอง',
                ความชอบ: 'ชอบเล่นเกมฟุตบอล',
            },
            {
                name: 'ครีม',
                เพศ: 'หญิง',
                อายุ: 16,
                ความสัมพัน: 'เพื่อนตอนเรียนม.ปลายด้วยกัน',
                เดือนเกิด: 'สิงหาคม',
                โรงเรียน: 'เรียนม.ปลายที่พานทอง',
                ความชอบ: 'ชอบเสื้อผ้าเเละการเเต่งหน้า',
            },
            {
                name: 'อาร์ม',
                เพศ: 'ชาย',
                อายุ: 16,
                ความสัมพัน: 'เพื่อนตอนเรียนม.ปลายด้วยกัน',
                เดือนเกิด: 'มิถุนายน',
                โรงเรียน: 'เรียนม.ปลายที่พานทอง',
                ชือ: 'ชื่อเล่นของคุณภาษาไทยเเปลว่าเเขน',
            },
            {
                name: 'องศา',
                เพศ: 'ชาย',
                อายุ: 16,
                ความสัมพัน: 'เพื่อนตอนเรียนม.ปลายด้วยกัน',
                เดือนเกิด: 'เมษายน',
                โรงเรียน: 'เรียนม.ปลายที่พานทอง',
                ชือ: 'คุณมีอีกชื่อคือวิว',
            },
            {
                name: 'ดรีม',
                เพศ: 'ชาย',
                อายุ: 16,
                ความสัมพัน: 'เพื่อนตอนเรียนม.ปลายด้วยกัน',
                เดือนเกิด: 'เมษายน',
                โรงเรียน: 'เรียนม.ปลายที่พานทอง',
                ความชอบ: 'ชอบเล่นfiveM, roblox',
                ชือ: 'ชื่อเล่นของคุณภาษาไทยเเปลว่าความฝัน',
            },
            {
                name: 'เนะ',
                เพศ: 'หญิง',
                อายุ: 14,
                ความสัมพัน: 'รุ่นน้อง',
                สนิท: 'รู้จัก อั๋นเเละปูน',
                ถูกชอบ: 'ปูนชอบคุณ เเม้ไม่ใช่ อย่างน้อยปังปอนด์ก็เชียร์'
            },
            {
                name: 'คุณหนู',
                เพศ: 'หญิง',
                อายุ: 14,
                ความสัมพัน: 'รุ่นน้อง',
                เดือนเกิด: 'ธันวาคม',
                พบกัน: 'คุณกับปังปอนด์พบกันเพราะเกม miniworld',
                ถูกชอบ: 'ปูนชอบคุณ เเม้ไม่ใช่ อย่างน้อยปังปอนด์ก็เชียร์'
            },
            {
                name: 'ผักหวาน',
                เพศ: 'หญิง',
                อายุ: 15,
                ความสัมพัน: 'รุ่นน้อง',
                เดือนเกิด: 'ธันวาคม',
                พบกัน: 'คุณกับปังปอนด์พบกันเพราะเกม miniworld',
                ครอบครัว: 'มีคุณพ่อเป็นชาวต่างชาติ',
                ถนัด: 'ภาษาอังกฤษ',
            },
            {
                name: 'จันทร์จ้าว',
                เพศ: 'หญิง',
                อายุ: 15,
                ความสัมพัน: 'รุ่นน้อง',
                เดือนเกิด: 'กุมภาพันธ์',
                พบกัน: 'คุณกับปังปอนด์พบกันเพราะเกม miniworld',
                ชือปลอม: 'คุณมีชื่อว่ากระต่าย  เเต่จริงๆเเล้วคุณชื่อเล่นว่า จันทร์จ้าว'
            },
            {
                name: 'น้ำแข็ง',
                เพศ: 'หญิง',
                อายุ: 14,
                เคยมีเเฟน: 'เคย',
                ความสัมพัน: 'รุ่นน้อง',
                ชือ: 'ชื่อเล่นของคุณเกี่ยวกับน้ำ เช่นผักในน้ำ หรือมีคำว่าน้ำในชื่อ',
                เดือนเกิด: 'กรกฎาคม',
                พบกัน: 'คุณกับปังปอนด์พบกันเพราะเกม freefire'
            },
            {
                name: 'ฝันหวาน',
                เพศ: 'หญิง',
                อายุ: 14,
                ความสัมพัน: 'รุ่นน้อง',
                พบกัน: 'คุณกับปังปอนด์พบกันเพราะเกม freefire',
                ถนัด: 'วาดรูปสวย',
                ความชอบ: 'ชอบวาดรูป',
            },
            {
                name: 'เกรป',
                เพศ: 'หญิง',
                อายุ: 13,
                ความสัมพัน: 'รุ่นน้อง',
                ชือ: 'มีชื่อเล่นที่เกี่ยวกับหรือเป็น ผลไม้',
                เดือนเกิด: 'กรกฎาคม',
                พบกัน: 'คุณกับปังปอนด์พบกันเพราะเกม freefire'
            },
            {
                name: 'พิมพ์',
                เพศ: 'หญิง',
                อายุ: 14,
                เคยมีเเฟน: 'เคย',
                ความสัมพัน: 'รุ่นน้อง',
                เดือนเกิด: 'มกราคม',
                พบกัน: 'คุณกับปังปอนด์พบกันเพราะเกม freefire',
                เเคลน: 'คุณเป็นลูกเเคลนของเเคลน ID:[???]'
            },
            {
                name: 'ตัง',
                เพศ: 'ชาย',
                อายุ: 14,
                เคยมีเเฟน: 'เคย',
                ความสัมพัน: 'รุ่นน้อง',
                เดือนเกิด: 'กันยายน',
                พบกัน: 'คุณกับปังปอนด์พบกันเพราะเกม freefire',
                เเคลน: 'คุณเป็นลูกเเคลนของเเคลน ID:[???]'
            },
            {
                name: 'ตาล',
                เพศ: 'ชาย',
                อายุ: 16,
                ความสัมพัน: 'เพื่อนตอนเรียนม.ต้นด้วยกัน',
                เดือนเกิด: 'มีนาคม',
                ถนัด: 'ภาษาอังกฤษ',
                เรียน: 'วิศกรรมไฟฟ้า'
            },
            {
                name: 'ธี',
                เพศ: 'ชาย',
                อายุ: 16,
                ความสัมพัน: 'เพื่อนตอนเรียนม.ต้นด้วยกัน',
                เดือนเกิด: 'มีนาคม',
                เเคลน: 'คุณเป็นลูกเเคลนของเเคลน ID:[???]',
                เรียน: 'กศน.'
            },
            {
                name: 'เฟริน',
                เพศ: 'หญิง',
                อายุ: 12,
                เคยมีเเฟน: 'ไม่เคย',
                ความสัมพัน: 'น้องสาวของปังปอนด์',
                ความชอบ: 'เล่นเกม',
                เกมทีชอบ: 'ROV',
                ครอบครัว: 'เป็นคนภายในครอบครัวปังปอนด์',
            },
            {
                name: 'พี่เเดง',
                เพศ: 'หญิง',
                อายุ: 34,
                เคยมีเเฟน: 'เคย',
                ความสัมพัน: 'พี่สาวของปังปอนด์',
                เดือนเกิด: 'พฤศจิกายน',
                ครอบครัว: 'เป็นคนภายในครอบครัวปังปอนด์',
            },
            {
                name: 'พี่เพชร',
                เพศ: 'ชาย',
                อายุ: 34,
                เคยมีเเฟน: 'เคย',
                ความสัมพัน: 'พี่เขยของปังปอนด์',
                เดือนเกิด: 'ตุลาคม',
                ครอบครัว: 'เป็นคนภายในครอบครัวปังปอนด์',
            },
            {
                name: 'พี่กอล์ฟ',
                เพศ: 'ชาย',
                อายุ: 27,
                เคยมีเเฟน: 'เคย',
                ความสัมพัน: 'พี่ชายของปังปอนด์',
                เดือนเกิด: 'กุมภาพันธ์',
                ครอบครัว: 'เป็นคนภายในครอบครัวปังปอนด์',
                ความชอบ: 'ชอบเล่นเบส',
                เกมทีชอบ: 'ROV',
            },
            {
                name: 'พี่โปรเเกรมเมอร์',
                เพศ: 'ชาย',
                อายุ: 27,
                เคยมีเเฟน: 'เคย',
                เดือนเกิด: 'มิถุนายน',
                อาชีพ: 'คุณมีอาชีพเป็นโปรเเกรมเมอร์'
            },
                /*  
               name: '',
               เพศ: '',
               อายุ: 16,
               เคยมีเเฟน: '',
               ความสัมพัน: '',
               ผลการเรียน: '',
               เดือนเกิด: '',
               โรงเรียน: '',
               ความชอบ: '',
               พบกัน: 'คุณกับปังปอนด์พบกันเพราะเกม freefire',
               เเคลน: 'คุณเป็นลูกเเคลนของเเคลน ID:[???]'
               ถนัด: ''
               */
        ];
        
        function generateQuestion() {
            const unansweredData = data.filter(person => !person.hasOwnProperty('ถามเพศ'));
            if (unansweredData.length === 0) {
                document.getElementById('question').innerText = 'คำถามทุกคนถูกถามแล้ว';
            } else {
                const randomIndex = Math.floor(Math.random() * unansweredData.length);
                const person = unansweredData[randomIndex];
                let question = '';

                if (!person.hasOwnProperty('ถามเพศ')) {
                    question = `คุณเป็น${person['เพศ']}หรือไม่?`;
                    person['ถามเพศ'] = true;

                }

                document.getElementById('question').innerText = question;
                console.log(data);
            }
        }
        let ii = 0;
        function truee() {
            ii++;
            if (ii === 1) {
                const currentQuestion = document.getElementById('question').innerText;
                const personIndex = findPersonIndexByQuestion(currentQuestion);
                const person = data[personIndex];
                const oppositeGender = person['เพศ'] === 'ชาย' ? 'หญิง' : 'ชาย';
                for (let i = data.length - 1; i >= 0; i--) {
                    if (data[i]['เพศ'] === oppositeGender) {
                        data.splice(i, 1);
                    }
                }

                for (let i = 0; i < data.length; i++) {
                    if (data[i]['เพศ'] !== oppositeGender) {
                        // เพิ่มคะแนนให้กับผู้ใช้ที่ตรงกับเงื่อนไข
                        data[i].คะแนน = (data[i].คะแนน || 0) + 1;
                    }
                }


            } else if (ii === 2) {
                // เช็คเงื่อนไขของอายุและลบผู้ใช้ที่มีอายุน้อยกว่า 15 ปี
                for (let i = data.length - 1; i >= 0; i--) {
                    if (data[i]['อายุ'] && data[i]['อายุ'] < 15) {
                        data.splice(i, 1);
                    }
                }

            }
            console.log(ii)
            console.log(data);
            // เรียกฟังก์ชันที่ให้แสดงคะแนนใหม่
            displayScores();
        }

        function fale() {
            ii++;
            if (ii == 1) {
                const currentQuestion = document.getElementById('question').innerText;
                const personIndex = findPersonIndexByQuestion(currentQuestion);
                const person = data[personIndex];
                const oppositeGender = person['เพศ'] === 'หญิง' ? 'หญิง' : 'ชาย';
                for (let i = data.length - 1; i >= 0; i--) {
                    if (data[i]['เพศ'] === oppositeGender) {
                        data.splice(i, 1);
                    }
                }

                for (let i = 0; i < data.length; i++) {
                    if (data[i]['เพศ'] !== oppositeGender) {
                        // เพิ่มคะแนนให้กับผู้ใช้ที่ตรงกับเงื่อนไข
                        data[i].คะแนน = (data[i].คะแนน || 0) + 1;
                    }
                }


            } else if (ii == 2) {
                // เช็คเงื่อนไขของอายุและลบผู้ใช้ที่มีอายุน้อยกว่า 15 ปี
                for (let i = data.length - 1; i >= 0; i--) {
                    if (data[i]['อายุ'] && data[i]['อายุ'] < 15) {
                        data.splice(i, 1);
                    }
                }

            }
            console.log(ii)
            console.log(data);
            // เรียกฟังก์ชันที่ให้แสดงคะแนนใหม่
            displayScores();
        }

        function findPersonIndexByQuestion(question) {
            for (let i = 0; i < data.length; i++) {
                const person = data[i];
                const gender = person['เพศ'];
                if (question.includes(gender)) {
                    return i;
                }
            }
            return -1;
        }
        // Function to display scores of all users in the console
        function displayScores() {
            console.log("คะแนนเปอร์เซ็นต์ของผู้ใช้ทั้งหมด:");

            // Calculate total score of remaining users
            let totalScore = 0;
            for (let person of data) {
                totalScore += person.คะแนน || 0;
            }

            // Display most similar person and match percentage in HTML
            let resultHTML = '';
            for (let person of data) {
                const percentage = ((person.คะแนน || 0) / totalScore) * 100;
                console.log(`${person.name}: ${percentage.toFixed(2)}%`);
                resultHTML += `<p>${person.name}: ${percentage.toFixed(2)}%</p>`;
            }

            document.getElementById('result').innerHTML = resultHTML;
        }



        // Call the displayScores function to display scores in the console


        window.onload = function () {
            generateQuestion();
        };
    </script>
</body>

</html>